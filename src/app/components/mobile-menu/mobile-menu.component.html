<div class="mobile-menu">
  <div class="menu-toolbar">
    <button aria-label="Close menu" mat-icon-button (click)="closeMobileMenu('', '')">
      <mat-icon>menu</mat-icon>
    </button>
    <a routerLink='/' (click)="closeMobileMenu('HOME', '/')" class="logo">
      <img alt="Favorite icon" src="/assets/static_images/MTM_Favicon_4c_2.svg">
    </a>
    <button aria-label="Close menu" mat-icon-button class='close-button' (click)="closeMobileMenu('HOME', '/')">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="auth-section" *ngIf='!loggedIn'>
    <button mat-flat-button color='primary' (click)='promptUserForAuth()' i18n class='uppercase'>register</button>
    <div class="sign-in-btn-wrapper">
      <small i18n>Already have an account?</small>
      <button mat-flat-button class='sign-in-button' (click)='promptUserForAuth()' i18n class='uppercase'>signin</button>
    </div>
  </div>
  <div class="auth-section" *ngIf='loggedIn'>
    <button mat-flat-button color='primary' routerLink='/profile' (click)='closeMobileMenu("Profile", "/profile")'
      i18n class='uppercase'>my account
      </button>

  </div>
  <mat-nav-list *ngIf='loggedIn' class='menu-list'>
    <ng-container *ngFor="let page of authenticatedPages">
      <mat-list-item class='page-item' mat-list-item [class.active]='page.active' (click)="handlePageClick(page)"
        i18n='authenticatedPage: name of the page'>
        {
        page,
        select,
        Select Recipes { select recipes}
        Meal Plan {meal plan}
        Favourites {favourites}
        Grocery List {grocery list }
        }
        <!-- <ng-container *ngIf='page.subPages'>
          <mat-icon>{{page.toggled ? 'expand_less' : 'expand_more' }}</mat-icon>
        </ng-container> -->
      </mat-list-item>
      <mat-nav-list class='sub-list' *ngIf='page.subPages && page.toggled'>
        <mat-list-item *ngFor="let subPage of page.subPages; let last=last;" class='page-item' mat-list-item
          [class.active]='subPage.active' [routerLink]='subPage.route' [class.pushDown]='last'
          (click)="closeMobileMenu(subPage.name, subPage.route)" i18n='subPage: name of the subpage'>
          {
          subPage,
          select,
          All Recipes { all recipes}
          30 minutes or less {30 minutes or less}
          Chicken {Chicken}
          Summer {Summer}
          BBQ {BBQ}
          Dinner {Dinner}
          Pasta {Pasta}
          Slow Cooker {Slow Cooker}
          Tea {Tea}
          Breakfast and Brunch {Breakfast and Brunch}
          Italian {Italian}
          Indian {Indian}
          Asian {Asian}
          Mexican {Mexican}
          Middle Eastern {Middle Eastern}
          Mediterranean {Mediterranean}
          Canadian {Canadian}
          Salad {Salad}
          Better for you {Better for you}
          }
        </mat-list-item>
      </mat-nav-list>
    </ng-container>
  </mat-nav-list>

  <div class="bottom-wrapper">
    <mat-nav-list class='menu-list'>
      <a *ngFor="let page of menuPages" class='page-item' mat-list-item [class.active]='page.active'
        [routerLink]='page.route' [fragment]="page.route === '/about' ? 'howitworks' : ''" i18n='page: name of the page'
        (click)="closeMobileMenu(page.name, page.route)">
        {
        page,
        select,
        articles { articles}
        about {about}
        contact us {contact us}
        faq {faq}
        }
      </a>
      <a *ngIf='loggedIn' class='page-item sign-out-item' mat-list-item (click)="signOut()" i18n>
        sign out
      </a>
    </mat-nav-list>
  </div>
</div>